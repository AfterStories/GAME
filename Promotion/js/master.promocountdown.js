function FMPromoCountdownRender(uiObjParent,uiObj,val){var valTxt=val.toString();val<0?valTxt="__":valTxt.length<2&&(valTxt="0"+valTxt),uiObj.text(valTxt)}function FMPromoCountdownConvertServerDateTime(serverDateTime){return new Date(Date.parse(serverDateTime,"yyyy/MM/dd HH:mm Z"))}function FMPromoCountdownTick(uiId,serverPromoEndDateTime,promoEnd){var index=serverPromoEndDateTime.lastIndexOf("+"),serverOffset=serverPromoEndDateTime.substring(index-1),uiObj,uiCont,customRenderMethodName,uiIdD,uiIdH,uiIdM,uiIdS;serverPromoEndDateTime=serverPromoEndDateTime.substring(0,index-1);var cdDt=new Date(serverPromoEndDateTime.replace("GMT+8","")),today=new Date,now=today.getTime(),diff=cdDt-now+(serverOffset*60+today.getTimezoneOffset())*6e4,cdDtSs=Math.floor(diff/1e3),cdDtMs=Math.floor(cdDtSs/60),cdDtHs=Math.floor(cdDtMs/60),cdDtDs=Math.floor(cdDtHs/24),cdSs=cdDtSs%60,cdMs=cdDtMs%60,cdHs=cdDtHs%24;cdMs<59?cdMs+=1:(cdMs=00,cdHs+=1),uiObj=$("#"+uiId),uiCont=uiObj.find("ul.countdown"),cdDt<now?(uiObj.find("div.countdown_title").children().text(promoEnd),uiCont.children().children().text("00")):(customRenderMethodName="FMPromoCountdownRender",uiIdD=$(uiCont.children().children()[0]).attr("id"),FMCountdownShow(uiObj,uiIdD,cdDtDs,customRenderMethodName),uiIdH=$(uiCont.children().children()[1]).attr("id"),FMCountdownShow(uiObj,uiIdH,cdHs,customRenderMethodName),uiIdM=$(uiCont.children().children()[2]).attr("id"),FMCountdownShow(uiObj,uiIdM,cdMs,customRenderMethodName),uiIdS=$(uiCont.children().children()[3]).attr("id"),FMCountdownShow(uiObj,uiIdS,cdSs,customRenderMethodName))}function FMPromoCountdown(uiId,n,promoEnd){var dic={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6},now=new Date,cday=dic[n[0]]-now.getUTCDay(),time=n[1].split(":"),offset,endDateUTC,item;cday<0&&(cday+=7),offset=n[2]*1+now.getTimezoneOffset()/60,endDateUTC=new Date(now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()+cday,time[0],time[1],time[2]),endDateUTC.setHours(endDateUTC.getHours()+offset),endDateUTC<now&&endDateUTC.setDate(endDateUTC.getDate()+7),item=endDateUTC.toString()+" "+n[2],FMPromoCountdownTick(uiId,item,promoEnd)}function MaintanenceCountdown(uiId,n,startTime){var now=new Date,time=n[0].split(":"),start=startTime.split(":"),endDateUTC=new Date(now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate(),time[0],time[1],time[2]),uiIdS,uiIdH;if(!(endDateUTC<now)&&!(now<new Date(now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate(),start[0],start[1],start[2]))){var diff=endDateUTC.getTime()-now.getTime(),cdDtSs=Math.floor(diff/1e3),cdDtMs=Math.floor(cdDtSs/60),cdDtHs=Math.floor(cdDtMs/60),cdSs=cdDtSs%60,cdMs=cdDtMs%60+1,cdHs=cdDtHs%24,uiObj=$("#"+uiId),uiIdM=$(uiObj.children().children()[2]).attr("id");FMCountdownShow(uiObj,uiIdM,cdSs,"FMPromoCountdownRender"),uiIdS=$(uiObj.children().children()[1]).attr("id"),FMCountdownShow(uiObj,uiIdS,cdMs,"FMPromoCountdownRender"),uiIdH=$(uiObj.children().children()[0]).attr("id"),FMCountdownShow(uiObj,uiIdH,cdHs,"FMPromoCountdownRender")}}function FMPromoCountdownInit(uiId,serverPromoEndDateTime,promoEnd){var n=serverPromoEndDateTime.split(/\s+/);switch(n.length){case 2:MaintanenceCountdown(uiId,n,promoEnd);break;case 3:FMPromoCountdown(uiId,n,promoEnd);break;default:serverPromoEndDateTime!=0&&FMPromoCountdownTick(uiId,serverPromoEndDateTime,promoEnd);break}}function RewriteID(i,loop){$("#"+i).attr("id","div"+loop)}