(function(){var n,t=function(n,t){return function(){return n.apply(t,arguments)}},i=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};n=function(){function n(n){this.$=n;this.afterMatchFilterChanged=t(this.afterMatchFilterChanged,this);this.resetAllModulesOddsData=t(this.resetAllModulesOddsData,this)}var r;return n.prototype.oddsModules=[],n.prototype.betClickedMatchIdStorageArray={},r=!1,n.prototype.previousCriteria={},n.prototype.pagePreviousLastPullTime=0,n.prototype.finishRenderedmodules=0,n.prototype.lastRefreshLimitTime=(new Date).getTime(),n.prototype.initializeWebSync=function(){MemberSite.Web.hubClient.initialize(this.resubscribeCallback)},n.prototype.initializeSignalR=function(){var n;n=MemberSite.Web.oddsCriteria.getCriteria();MemberSite.Web.hubClient.initialize(this.resubscribeCallback)},n.prototype.initializePage=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt){var ni,gt,dt;rt&&typeof DocumentReadyBTStartUp!="function"&&(rt=!1);$.isNumeric(h)&&(h=MemberSite.Web.oddsConst.theme[h]);dt=0;n!=null&&$.isArray(n)&&n.length>0&&n[0]!==-1&&(dt=parseInt(n[0]));gt=this.isMatchFilterActive();this.isMultiSportPage(t,e)&&(dt=0,t===MemberSite.Web.oddsConst.Favourite&&(MemberSite.Web.oddsCriteria.sportId=0),o>7&&(o=0));gt?dt!==0&&o!==12&&(o=12):(dt===0||dt===43)&&o===12&&(o=0);e&&(r=MemberSite.Web.oddsConst.EuroOdds,t=0);o!==0&&(s=0);dt===43&&o===0&&(s=2);dt===44&&(o===12||o===0)&&(o=12,s=0);MemberSite.Web.oddsCriteria.initialize(n,t,r,u,f,e,o,parseInt(s),parseInt(i),h,c,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt);a&&(this.previousCriteria={},MemberSite.Web.oddsCriteria.showStatistics=l,MemberSite.Web.leftPanelProcessor.initialize());this.showPageLoadingStauts();MemberSite.Web.oddsUI.unregisterAllModules();this.subscribeFinishRenderedModules();p&&MemberSite.Web.announcementScroll.initialize();ni=this.initializePageHeader();ni.done(function(i){return function(){var r,c,v,u,f,h,l,y,a,p;if(h=i.getPageSportMatchData(dt,t,o,e,gt),h!=null&&h.length>0){for(c=a=0,p=h.length;a<p;c=++a)r=h[c],u=o,f=s,i.isMultiSportPage(t,e,gt)&&($.inArray(r.sport,[0,44])===-1?(u=12,f=0):r.sport===43?(u=0,f=2):r.sport===44&&(u=12,f=2)),i.isValidSport(n,t,e,r.sport)&&(gt&&r.sport===0&&u===12&&(u=0),l=MemberSite.Web.oddsUtil.oddsPageKey(r.sport,r.market,u,f),y="#"+l,$(y).length===0&&$('<div id="'+l+'" class="oddsDisplayContentDiv fullDiv"><div>').appendTo("#oddsPageLayout"),v=c===0,i.initializeOddsDisplayModule(r.sport,r.market,u,parseInt(f),l,r.matchIds,v));i.pagePreviousLastPullTime=(new Date).getTime()+1e3}else i.addNoMatchMessageFavouritePage(t),i.hidePageLoadingStauts(),i.finishRenderedmodules=0}}(this))},n.prototype.subscribeFinishRenderedModules=function(){return $.subscribe("finishRenderedModules",function(n){return function(){var t;n.finishRenderedmodules++;t=MemberSite.Web.oddsCriteria.getCriteria();t.IsUserLogin&&$(".fullDiv.allCriterialPanel").css("top","16px");n.finishRenderedmodules===n.oddsModules.length&&(n.addNoMatchMessage(),n.hidePageLoadingStauts(),n.finishRenderedmodules=0,$.unsubscribe("finishRenderedModules"))}}(this))},n.prototype.resubscribeCallback=function(){var i,n,r,t;for(t=MemberSite.Web.oddsUI.oddsModules,n=0,r=t.length;n<r;n++)i=t[n],i.module.resubscribeChannel()},n.prototype.initializeOddsDisplayModule=function(n,t,i,r,u,f,e){var o;o=new MemberSite.Classes.oddsDisplayModule(u,$);this.registerModule(o,e);o.initialize(n,t,i,r,u,f,e)},n.prototype.addNoMatchMessageLiveParlayPage=function(n){(MemberSite.Web.oddsCriteria.market===MemberSite.Web.oddsConst.LiveMarket||MemberSite.Web.oddsCriteria.openParlay===1)&&this.addNoMatchMessageWithTimeout(n)},n.prototype.addNoMatchMessageFavouritePage=function(n){var t;n!==MemberSite.Web.oddsConst.Favourite||this.isNoMatchStringOrNoFavouriteMatchString()||(t=this.getFavNoMatchString(),$(t).appendTo("#oddsPageLayout"))},n.prototype.isNoMatchStringOrNoFavouriteMatchString=function(){return this.getVisibleOddsDisplayModulesCount()===0&&$("#oddsPageLayout .noMatchString").length===0&&$("#favNoMatch").length===0?!1:!0},n.prototype.getVisibleOddsDisplayModulesCount=function(){var t,i,n,u,r;for(i=0,r=this.oddsModules,n=0,u=r.length;n<u;n++)t=r[n],t.module.oddsData!==null&&t.module.oddsData.length>0&&i++;return i},n.prototype.addNoMatchMessageWithTimeout=function(n){setTimeout(function(n){return function(){n.addNoMatchMessage()}}(this),n)},n.prototype.addNoMatchMessage=function(){var t,n;n="";t=MemberSite.Web.oddsCriteria.getCriteria();t.Market!==MemberSite.Web.oddsConst.Favourite||this.isNoMatchStringOrNoFavouriteMatchString()?this.isNoMatchStringOrNoFavouriteMatchString()||(n=this.getNoMatchString()):n=this.getFavNoMatchString();$(n).appendTo("#oddsPageLayout")},n.prototype.getNoMatchString=function(){var n;return n=this.getSelectedJSLanguage(),'<div class="soccerBody noMatchString noMatchDiv">'+n.noMatch+"<\/div>"},n.prototype.getFavNoMatchString=function(){var n;return n=this.getSelectedJSLanguage(),'<br/><div id="favNoMatch" class="noMatchDiv">'+n.favNoMatch+"<div>"},n.prototype.getSearchingString=function(){var n;return n=this.getSelectedJSLanguage(),n.searching},n.prototype.isMultiSportPage=function(n,t,i){return n===MemberSite.Web.oddsConst.Favourite||n===MemberSite.Web.oddsConst.LiveMarket||i===!0||t===1?!0:!1},n.prototype.checkParlayOrLive=function(n){(MemberSite.Web.oddsCriteria.market===MemberSite.Web.oddsConst.LiveMarket||MemberSite.Web.oddsCriteria.openParlay===1)&&(n.SportId=0)},n.prototype.initializePageHeader=function(){var t,n;return(n=$.Deferred(),t=MemberSite.Web.oddsCriteria.getCriteria(),this.isEqualPreviousNCurrentPageHeader())?(this.resetParlayMarketCheckbox(),n.resolve()):(MemberSite.Web.pageCriteria.unbind(),this.checkParlayOrLive(t),MemberSite.Web.webUtil.getServerData("GetPageHeader",t,function(t){return function(i){return $("#oddsPageLayout").prepend(i),MemberSite.Web.oddsCriteria.initailizeLeagueSelector2("selectLeague","selectLeagueDialog"),MemberSite.Web.oddsCriteria.market===4?$("#teamSearchBox").remove():(t.initializeMatchFilter(),MemberSite.Web.oddsCriteria.openParlay===1&&MemberSite.Web.oddsCriteria.market===MemberSite.Web.oddsConst.EarlyMarket&&$("#dateNavigationBar").remove()),t.resetPageHeaderAfterInitial(),MemberSite.Web.pageCriteria.bind(),n.resolve()}}(this)),n.promise())},n.prototype.resetParlayMarketCheckbox=function(){var n;if(MemberSite.Web.oddsCriteria.openParlay===1)return n=$("#parlayMarketsMainContainer").find(".parlayMarketCheckbox"),$(n[0]).attr("checked",!0),$(n[1]).attr("checked",!0),$(n[2]).attr("checked",!1)},n.prototype.isValidSport=function(n,t,r,u){return this.isMultiSportPage(t,r)&&n!=null&&$.isArray(n)&&n.length>0&&n[0]!==-1?i.call(n,u)>=0:!0},n.prototype.resetPageHeaderAfterInitial=function(){var n,t,u,i,e,r,f;r=MemberSite.Web.cookie2.getViewType();f=parseInt(MemberSite.Web.oddsCriteria.viewType);n=MemberSite.Web.cookie2.getOddsType();t=parseInt(MemberSite.Web.oddsCriteria.oddsType);i=MemberSite.Web.cookie2.getSortType();e=parseInt(MemberSite.Web.oddsCriteria.sortType);MemberSite.Web.oddsCriteria.openParlay===1?(u=$("#selOddsType"),$(u).off("change"),$(u).remove(),MemberSite.Web.oddsCriteria.sportId===0&&MemberSite.Web.oddsCriteria.oddsPageCode===0&&$("#selViewType").val(r!=null?r:f),$("#selSortType").val(i!=null?i:0)):(MemberSite.Web.oddsCriteria.sportId===0&&MemberSite.Web.oddsCriteria.oddsPageCode===0?($("#selViewType").val(r!=null?r:f),$("#selOddsType").val(n!=null?n:t),MemberSite.Web.oddsCriteria.pageMarket===MemberSite.Web.oddsConst.TodayMarket&&this.setFilterPeriodCombo()):MemberSite.Web.oddsCriteria.sportId&&MemberSite.Web.oddsCriteria.oddsPageCode===0?$("#selOddsType").val(n!=null?n:t):MemberSite.Web.oddsCriteria.sportId===44&&MemberSite.Web.oddsCriteria.oddsPageCode===12?$("#selOddsType").val(n!=null?n:t):(MemberSite.Web.oddsCriteria.sportId===0&&MemberSite.Web.oddsCriteria.oddsPageCode===4||MemberSite.Web.oddsCriteria.oddsPageCode===12)&&$("#selOddsType").val(n!=null?n:t),$("#selSortType").val(i!=null?i:e));MemberSite.Web.leaguesSelector2.changeSelectLeagueButtonBackground()},n.prototype.setFilterPeriodCombo=function(){var t,i,n;n=MemberSite.Web.cookie2.getFilterDay(0,0);i=parseInt($("#selFilterPeriod").val());t=1+parseFloat("0."+i);MemberSite.Web.oddsCriteria.filterDay=n?n===1||n>=t?n:t:t;$("#selFilterPeriod").val(Math.round((MemberSite.Web.oddsCriteria.filterDay-1)*10))},n.prototype.isEqualPreviousNCurrentPageHeader=function(){var n;return n=MemberSite.Web.oddsCriteria.getCriteria(),!$.isEmptyObject(this.previousCriteria)&&this.previousCriteria.SportId===n.SportId&&this.previousCriteria.Market===n.Market&&this.previousCriteria.OddsPageCode===n.OddsPageCode&&this.previousCriteria.OpenParlay===n.OpenParlay},n.prototype.registerModule=function(n,t){n&&this.oddsModules.push({name:n.name,main:t,module:n})},n.prototype.resetAllModulesOddsData=function(){var i,n,r,t;for(t=this.oddsModules,n=0,r=t.length;n<r;n++)i=t[n],i.module.oddsData=[]},n.prototype.unregisterAllModules=function(){var t,n,r,i;for(i=this.oddsModules,n=0,r=i.length;n<r;n++)t=i[n],t.module.clear(),t.module=null;this.oddsModules=[];this.isEqualPreviousNCurrentPageHeader()||$("#oddsPageLayout").empty()},n.prototype.unregisterModules=function(n){var i,t,f,r,e,u;for(t=-1,u=this.oddsModules,i=r=0,e=u.length;r<e;i=++r)if(f=u[i],f.name===n){t=i;break}t>=0&&(this.oddsModules[t].module.clear(),this.oddsModules[t].module=null,MemberSite.Web.webUtil.arrayRemove(this.oddsModules,t));this.oddsModules.length===0&&MemberSite.Web.oddsCriteria.market===MemberSite.Web.oddsConst.Favourite&&this.addNoMatchMessage()},n.prototype.modulesPushIdleTimeProcessor=function(){this.modulesIdleTimeSetIntervalId=setInterval(function(n){return function(){var s,h,f,i,t,c,r,u,l,a,e,o;for(e=n.oddsModules,r=0,l=e.length;r<l;r++)if(t=e[r],h=t.module.market===2?18e4:t.module.market===1?6e4:12e4,t.module.oddsData.length>0){for(i=[],c=(new Date).getTime(),o=t.module.oddsData,u=0,a=o.length;u<a;u++)f=o[u],s=c-f.LastPushTime,s>h&&i.push(parseInt(f.MatchId));i.length>0&&t.module.partialRefreshOddsDisplay({NewMatches:i,CloseMatches:[]},!0)}MemberSite.Web.oddsUI.pagePreviousLastPullTime=(new Date).getTime()+1e3}}(this),6e4)},n.prototype.changeMarketToAllModules=function(n){var r,t,u,i;for(i=this.oddsModules,t=0,u=i.length;t<u;t++)r=i[t],r.module.market=n},n.prototype.isIE8OR9=function(){var n;return $.browser.msie?(n=parseInt($.browser.version.substr(0,1)),n===9||n===8||n===7||n===6?!0:!1):!1},n.prototype.showPageLoadingStauts=function(){this.isIE8OR9()||($("#pageLoadingStatus").addClass("hideDisplay"),this.finishRenderedmodules=0,$("#pageLoadingStatus").removeClass("hideDisplay"))},n.prototype.hidePageLoadingStauts=function(){this.isIE8OR9()||$("#pageLoadingStatus").addClass("hideDisplay")},n.prototype.refreshPage=function(){var t,n,i,u,r;for(this.subscribeFinishRenderedModules(),this.showPageLoadingStauts(),r=this.oddsModules,t=i=0,u=r.length;i<u;t=++i)n=r[t],this.isMatchFilterActive()?n.module.refreshOddsDisplay():MemberSite.Web.oddsCriteria.openParlay!==1||MemberSite.Web.oddsCriteria.isMatchFilterActive()?n.module.refreshOddsDisplay():MemberSite.Web.oddsCriteria.parlayMarketArray[n.module.market]?n.module.refreshOddsDisplay():(n.module.clearContainer(),n.module.publishFinishRenderedModules());MemberSite.Web.leaguesSelector2.changeSelectLeagueButtonBackground();this.oddsModules.length===0&&MemberSite.Web.oddsCriteria.market===MemberSite.Web.oddsConst.Favourite&&this.hidePageLoadingStauts()},n.prototype.refreshPageWithTemplate=function(n){n||(n=MemberSite.Web.oddsCriteria.getCriteria());MemberSite.Web.oddsUI.initializePage(n.PageSportIds,n.Market,n.SortingType,n.OddsType,n.Language,n.FilterDay,n.OpenParlay,n.OddsPageCode,n.ViewType,n.Theme,n.UserTimeZone,n.ShowStatistics,!1,n.ExtraFilter,n.CompanyId,n.IsUserLogin,n.Token,n.MemberCode,n.Currency,n.MemberGroupId,n.BetTradeToken,n.BetTradeSiteId,n.AcceptAnyOdds,n.AcceptHigherOdds,n.IsBetTradeEnabled,n.BetTradeSubscribeUrl,n.BetTradeSecurityToken,n.SeasonId,n.VirtualSoccerMatchDay,n.VirtualBasketballMatchDay,n.WalletMode,n.WalletBalanceDisplayEnabled,n.WalletBalanceRefreshInterval,n.WalletCompanyGetBalanceUrl,n.WalletAccessKey,n.VIPSpread,n.MemberVIPSpread,n.SingleLeftPanelIdleTimeoutSeconds,n.ParlayLeftPanelIdleTimeoutSeconds,n.SportFilter)},n.prototype.afterMatchCountChanged=function(n){var r,t,i,f,u;for(u=this.oddsModules,i=0,f=u.length;i<f;i++)if(t=u[i],t.name===n&&t.module.oddsData&&t.module.oddsData.length===0){r="#"+t.module.container;$(r).empty();$(r).css("display","none");break}},n.prototype.afterMatchFilterChanged=function(n){var t,r,e,o,u,f,i;if(t=MemberSite.Web.oddsCriteria.getCriteria(),n===null){MemberSite.Web.cookie2.clearMatchFilter();this.clearMatchFilter();this.refreshPageWithTemplate(t);this.enableFilterPeriodNSelectLeagueButton();return}i=0;r=0;u=[];f="";n.Matches!=null&&n.Matches.length>0?(i=n.Matches[0].SportId,r=n.Matches[0].Market,f=n.LeagueName,u=function(){var t,u,i,r;for(i=n.Matches,r=[],t=0,u=i.length;t<u;t++)e=i[t],r.push(e.MatchId);return r}()):(i=n.SportId,r=n.Market,u=[n.MatchId],f=n.HomeTeam+" vs "+n.AwayTeam);o=i+"|"+r+"|"+f+"|"+u.join("|");MemberSite.Web.cookie2.setMatchFilter(o);t.SportId!==i&&(t.SportId=i,t.ViewType=0,t.OddsPageCode=t.SportId===0?0:12);this.refreshPageWithTemplate(t);this.disableFilterPeriodNSelectLeagueButton()},n.prototype.enableFilterPeriodNSelectLeagueButton=function(){return $("#selFilterPeriod").removeAttr("disabled"),$(".criteriaButton").css("color","")},n.prototype.disableFilterPeriodNSelectLeagueButton=function(){return $("#selFilterPeriod").attr("disabled","disabled"),$(".criteriaButton").css("color","rgb(204,204,204)")},n.prototype.clearMatchFilter=function(){var i,n,r,t;for(t=this.oddsModules,n=0,r=t.length;n<r;n++)i=t[n],i.module.matchIds=[-1]},n.prototype.getMatchFilterString=function(){var n,t;return(t=MemberSite.Web.cookie2.getMatchFilter(),t!=null&&(n=t.split("|"),n.length>=4))?n[2]:""},n.prototype.isMatchFilterActive=function(){var n;return n=this.getMatchFilterString(),n!=null&&n!==""},n.prototype.initializeMatchFilter=function(){var n,t;n=MemberSite.Web.oddsCriteria.getCriteria();$("input#matchFilterTextBox").matchFilter({url:MemberSite.Web.serverData.root+"Sportsbook/GetMatchSchedule",sportId:n.SportId,language:n.Language,minCharacters:1,onSelect:MemberSite.Web.oddsUI.afterMatchFilterChanged,buttonId:"matchFilterButton"});t=this.getMatchFilterString();t.length>0?($("input#matchFilterButton").removeClass("searchButton").addClass("searchClose"),$("input#matchFilterTextBox").val(t),this.disableFilterPeriodNSelectLeagueButton()):($("input#matchFilterButton").removeClass("searchClose").attr("searchButton"),this.enableFilterPeriodNSelectLeagueButton())},n.prototype.getSelectedJSLanguage=function(){var n;return n=MemberSite.Web.oddsCriteria.getCriteria(),MemberSite.Web.serverData.getLanguageStrings(n.Language)},n.prototype.getPageSportMatchData=function(n,t,i,r,u){var s,f,b,a,o,v,y,k,d,e,h,c,l,g,nt,tt,p,w;if(f=[],t===MemberSite.Web.oddsConst.Favourite)f=this.favouriteProcess();else if(u)v=MemberSite.Web.cookie2.getMatchFilter(),y=!1,v!=null&&(o=function(){var n,r,t,i;for(t=v.split("|"),i=[],n=0,r=t.length;n<r;n++)k=t[n],i.push(parseInt(k));return i}(),o.length>=4&&(f.push({sport:o[0],market:o[1],matchIds:o.slice(3)}),y=!0)),y||(s=MemberSite.Web.oddsCriteria.getCriteria(),f.push({sport:s.SportId,market:s.Market,matchIds:s.MatchIdList}));else if(r){for(a=[1,0,2],p=MemberSite.Web.serverData.activeSports,h=0,g=p.length;h<g;h++)if(e=p[h],e!==43&&e!==44)for(c=0,nt=a.length;c<nt;c++)d=a[c],f.push({sport:e,market:d,matchIds:[-1]})}else if(t===MemberSite.Web.oddsConst.LiveMarket)for(w=MemberSite.Web.serverData.activeSports,l=0,tt=w.length;l<tt;l++)e=w[l],e!==43&&e!==44&&f.push({sport:e,market:t,matchIds:[-1]});else b=n!==43&&n!==44&&t===MemberSite.Web.oddsConst.TodayMarket&&i!==MemberSite.Web.oddsConst.OutrightPage,b&&f.push({sport:n,market:MemberSite.Web.oddsConst.LiveMarket,matchIds:[-1]}),f.push({sport:n,market:t,matchIds:[-1]});return f},n.prototype.favouriteProcess=function(){var n;return n=[],MemberSite.Web.favourite.getFavouritesCount2()>0&&(n=this.getFavouritesRequestObject()),n},n.prototype.getFavouritesRequestObject=function(){var r,n,u,f,v,e,o,y,s,h,t,c,i,p,w,b,l,a;for(r=[],u=[1,0,2],t=0,p=u.length;t<p;t++)for(f=u[t],l=MemberSite.Web.favourite.favourites.sportArray,n=c=0,w=l.length;c<w;n=++c)if(y=l[n],e=y.marketArray[f],s={sport:n,market:f,matchIds:[]},h=[],e.leagueArray.length>0){for(a=e.leagueArray,i=0,b=a.length;i<b;i++)v=a[i],h.push(v.matchArray);o=[];s.matchIds=o.concat.apply(o,h);r.push(s)}return r},n.prototype.resynchronizeFavouritesStorage=function(n){for(var o,t,i,s,u,f,e,v,y,p,h,c,l,r=0,a=n.length;r<a;r++)for(t=n[r],h=MemberSite.Web.favourite.favourites.sportArray[t.Sport].marketArray[t.Market].leagueArray,u=0,v=h.length;u<v;u++){if(i=h[u],t.NewMatches>0)for(c=t.NewMatches,f=0,y=c.length;f<y;f++)s=c[f],i.Id===s.LeagueId&&leauge.matchArray.push(s.MatchId);if(t.CloseMatches>0)for(l=t.CloseMatches,e=0,p=l.length;e<p;e++)o=l[e],i.Id===o.LeagueId&&i.matchArray.removeByValue(o.MatchId)}MemberSite.Web.favourite.setFavouritesStorage()},n}();MemberSite.Web.oddsUI=new n(jQuery)}).call(this),function(){var t,n=function(n,t){return function(){return n.apply(t,arguments)}};t=function(){function t(t,i){this.name=t;this.$=i;this.generalClickEventHandler=n(this.generalClickEventHandler,this);this.clearContainer2=n(this.clearContainer2,this);this.clearContainer=n(this.clearContainer,this);this.clear=n(this.clear,this);this.removeMatchInCache=n(this.removeMatchInCache,this);this.partialRefreshOddsDisplay=n(this.partialRefreshOddsDisplay,this);this.refreshOddsDisplay=n(this.refreshOddsDisplay,this);this.processPushData=n(this.processPushData,this);this.resubscribeChannel=n(this.resubscribeChannel,this);this.subscribeChannel=n(this.subscribeChannel,this);this.initialize=n(this.initialize,this)}return t.prototype.name="",t.prototype.sport=0,t.prototype.market=MemberSite.Web.oddsConst.TodayMarket,t.prototype.oddsPageCode=0,t.prototype.viewType=0,t.prototype.oddsPageKey="",t.prototype.container="",t.prototype.matchChannel="",t.prototype.oddsChannel="",t.prototype.oddsData=[],t.prototype.oddsMsgProcessor={},t.prototype.mainModule=!0,t.prototype.matchIds=[-1],t.prototype.tableHeader="",t.prototype.initialize=function(n,t,i,r,u,f,e){var o;this.sport=n;this.market=t;this.oddsPageCode=i;this.container=u;this.mainModule=e!=null?e:!0;f!==null&&$.isArray(f)&&f.length>0&&(this.matchIds=f);this.setFavouritesSelectedLeaguesValue();o=MemberSite.Web.oddsCriteria.getCriteria2(this.sport,this.market,this.oddsPageCode,this.matchIds);this.setViewType(o);this.oddsPageKey=MemberSite.Web.oddsUtil.oddsPageKey(this.sport,this.market,this.oddsPageCode,this.viewType);this.oddsMsgProcessor=this.createMessageProcessor();$.when(this.initializeTemplate(o)).then(function(n){return function(){return MemberSite.Web.oddsCriteria.openParlay!==1||MemberSite.Web.oddsCriteria.isMatchFilterActive()?n.refreshOddsDisplay():MemberSite.Web.oddsCriteria.parlayMarketArray[n.market]?n.refreshOddsDisplay():(n.clearContainer(),n.publishFinishRenderedModules())}}(this))},t.prototype.subscribeChannel=function(){setTimeout(function(n){return function(){(n.oddsPageCode===8&&(n.market=0),n.sport!==null&&n.market!==null&&n.oddsPageCode!==null&&n.viewType!==null)&&(n.oddsChannel=MemberSite.Web.oddsUtil.formatOddsChannelName(n.sport,n.market,n.oddsPageCode,n.viewType),n.isStringEmptyOrBlank(n.oddsChannel)?MemberSite.Web.leftPanelProcessor.refreshPageByCriteria():MemberSite.Web.hubClient.subscribe(n.oddsChannel,n.processPushData))}}(this))},t.prototype.unsubscribeChannel=function(){this.isStringEmptyOrBlank(this.oddsChannel)||MemberSite.Web.hubClient.unsubscribe(this.oddsChannel)},t.prototype.resubscribeChannel=function(){var n;try{this.unsubscribeChannel();this.subscribeChannel()}catch(t){n=t;MemberSite.Web.webUtil.log(n)}},t.prototype.setFavouritesSelectedLeaguesValue=function(){MemberSite.Web.oddsCriteria.market===4&&(MemberSite.Web.leaguesSelector2.selectedLeagues=[-1])},t.prototype.setViewType=function(n){this.sport===0||this.sport===43?this.oddsPageCode===0?this.viewType=this.sport===0?n.ViewType:2:(this.viewType=0,n.ViewType=0):(this.viewType=0,n.ViewType=0)},t.prototype.isNeedUpdateFavouritesAfterRefresh=function(){return MemberSite.Web.favourite.getFavouritesCount2()>0?!0:!1},t.prototype.sendFavouritesSignalToLeftPanel=function(){MemberSite.Web.favourite.getFavouritesCount2()===1?$("#FavouriteMenuPanelIcon").hasClass("LeftpanelFavouritesDivIcon_s0")&&MemberSite.Web.favourite.leftPanelfavToggleClassGUI("#FavouriteMenuPanelIcon"):MemberSite.Web.favourite.getFavouritesCount2()===0&&$("#FavouriteMenuPanelIcon").hasClass("LeftpanelFavouritesDivIcon_s1")&&MemberSite.Web.favourite.leftPanelfavToggleClassGUI("#FavouriteMenuPanelIcon")},t.prototype.initializeJsModule=function(n){var t,i;return t=$.Deferred(),i=MemberSite.Web.oddsUtil.oddsPageKey(n.SportId,MemberSite.Web.oddsConst.TodayMarket,n.OddsPageCode,n.ViewType),MemberSite.Classes[i]!=null?(this.oddsMsgProcessor=this.createMessageProcessor(),t.resolve()):MemberSite.Web.webUtil.getServerData("GetJsModuleUrl",n,function(n){return function(i){return $.getScript(i,function(){return n.oddsMsgProcessor=n.createMessageProcessor(),t.resolve(),t.promise()}),t.promise()}}(this)),t.promise()},t.prototype.initializeTemplate=function(n){var t,i;return t=$.Deferred(),i=MemberSite.Web.resig.hasTemplate(n.SportId,n.Market,n.OddsPageCode,n.ViewType),i?t.resolve():MemberSite.Web.webUtil.getServerData("GetTemplate2",n,function(i){return function(r){return i.registerResigTemplates(n,r),t.resolve(),t.promise()}}(this)),t.promise()},t.prototype.registerResigTemplates=function(n,t){var r,h,c,u,f,e,i,o,s,l;if(e=n.SportId,u=n.Market,f=n.OddsPageCode,o=n.ViewType,r=0,h=[0,200,201],e===0)for(s=0,l=h.length;s<l;s++)c=h[s],i=this.extractTemplate(t,r),MemberSite.Web.resig.registerHeader(c,u,f,o,i),r+=i.length;else i=this.extractTemplate(t,r),MemberSite.Web.resig.registerHeader(e,u,f,o,i),r+=i.length;i=this.extractTemplate(t,r);MemberSite.Web.resig.register(e,u,f,o,"",i);r+=i.length;i=this.extractTemplate(t,r);MemberSite.Web.resig.register(e,u,f,o,"Match",i);r+=i.length;i=this.extractTemplate(t,r);MemberSite.Web.resig.register(e,u,f,o,"OddsLine",i)},t.prototype.extractTemplate=function(n,t){var i,r,u;return r=n.indexOf('type="text/html">',t),i=r+17,u=n.indexOf("<\/script>",i),n.substring(i,u)},t.prototype.getOutRightKey=function(){return MemberSite.Web.oddsUtil.oddsPageKey(0,MemberSite.Web.oddsConst.TodayMarket,this.oddsPageCode,this.viewType)},t.prototype.createMessageProcessor=function(){var jsModuleName;return this.oddsPageCode===8?jsModuleName=this.getOutRightKey():this.sport===0||this.sport===8||this.sport===43?jsModuleName=MemberSite.Web.oddsUtil.oddsPageKey(this.sport,MemberSite.Web.oddsConst.TodayMarket,this.oddsPageCode,this.viewType):this.sport===1||this.sport===6?jsModuleName=MemberSite.Web.oddsUtil.oddsPageKey(1,MemberSite.Web.oddsConst.TodayMarket,this.oddsPageCode,this.viewType):this.sport>1&&this.sport<44?jsModuleName=MemberSite.Web.oddsUtil.oddsPageKey(2,MemberSite.Web.oddsConst.TodayMarket,this.oddsPageCode,this.viewType):this.sport===44&&(jsModuleName=MemberSite.Web.oddsUtil.oddsPageKey(44,MemberSite.Web.oddsConst.TodayMarket,12,0)),eval("new MemberSite.Classes."+jsModuleName+"($)")},t.prototype.processPushData=function(n){var i,t,s,h,c,y,r,l,e,u,f,a,v,o;if((this.sport!==43&&this.sport!==44||n.Type===MemberSite.Web.oddsConst.RefreshPartial)&&n!=null)if(n.Type===MemberSite.Web.oddsConst.RefreshAll)this.refreshOddsDisplay();else if(n.Type===MemberSite.Web.oddsConst.RefreshTemplate)i=MemberSite.Web.oddsCriteria.getCriteria2(this.sport,this.market,this.oddsPageCode,this.matchIds),MemberSite.Web.resig.remove(i.SportId,i.Market,i.OddsPageCode,i.ViewType),$.when(this.initializeTemplate(i)).then(function(n){return function(){return n.refreshOddsDisplay()}}(this));else if(n.Type===MemberSite.Web.oddsConst.ClearAndRefreshPartial){for(t=MemberSite.Web.webUtil.uncompressData(n.Data),e=[],u=0,a=t.length;u<a;u++)for(h=t[u],o=h.Matches,f=0,v=o.length;f<v;f++)c=o[f],e.push(c.MatchId);this.partialRefreshClosedMatches(e);this.translateAndSortKeyProcess(t,!0,!0);this.partialRenderOddsDisplay2(t)}else n.Type===MemberSite.Web.oddsConst.NewAndUpdateRefreshPartial?(t=MemberSite.Web.webUtil.uncompressData(n.Data),this.translateAndSortKeyProcess(t,!0,!0),this.partialRenderOddsDisplay2(t)):n.Type===MemberSite.Web.oddsConst.RefreshPartial?this.partialRefreshOddsDisplay(n.Data):n.Type===MemberSite.Web.oddsConst.ScreenUpdate?(r=n.Data,r&&$.isArray(r)&&r.length>0&&(s=function(){var n,i,t;for(t=[],n=0,i=r.length;n<i;n++)l=r[n],t.push(this.updatePushDataOnScreen(l));return t}.call(this),y=MemberSite.Web.oddsUtil.hilightChanges(s))):n.Type===MemberSite.Web.oddsConst.SportUpdate&&(MemberSite.Web.serverData.activeSports=n.Data,this.refreshOddsDisplay())},t.prototype.updatePushDataOnScreen=function(n){var t;return t=null,this.oddsMsgProcessor?n.PushMessageType===MemberSite.Web.oddsConst.MatchStatusMsg?(MemberSite.Web.leftPanelBetClickProcessor.leftPanelBetClickedUpdateNotifier(n),t=this.oddsMsgProcessor.updateMatchStatus(n)):n.PushMessageType===MemberSite.Web.oddsConst.OddsStatus?MemberSite.Web.leftPanelBetClickProcessor.leftPanelBetClickedUpdateNotifier(n):t=this.oddsMsgProcessor.updateOdds(n):MemberSite.Web.webUtil.log("updatePushDataOnScreen - oddsMsgProcessor is NULL or Undefined, "+this.oddsPageKey),t},t.prototype.setMatchLastPushTime=function(n){var i,t,u,r;for(r=this.oddsData,t=0,u=r.length;t<u;t++)if(i=r[t],i.MatchId===n.MatchId+""){i.LastPushTime=(new Date).getTime();return}},t.prototype.setCriteriaData=function(n){n.Market=this.market;n.SportId=this.sport;n.ViewType=this.viewType;n.OddsPageCode=this.oddsPageCode},t.prototype.refreshOddsDisplay=function(){var n;n=MemberSite.Web.oddsCriteria.getCriteria();this.setCriteriaData(n);n.MatchIdList=this.matchIds;MemberSite.Web.webUtil.getServerData("GetOddsData2",n,function(n){return function(t){return n.oddsMsgProcessor?n.renderOddsDisplay(t):MemberSite.Web.webUtil.log("refreshOddsDisplay - oddsMsgProcessor is NULL or Undefined, "+n.oddsPageKey)}}(this))},t.prototype.renderOddsDisplay=function(n){var i,e,t,r,o,u,f,s;if(MemberSite.Web.oddsCriteria.isMatchFilterActive()||this.sport!==0||this.oddsPageCode!==5||(n=[]),e="#"+this.container,i=$(e),n&&n.length>0){if(MemberSite.Web.oddsCriteria.oddsPageCode===MemberSite.Web.oddsConst.OutrightPage?this.translateAndSortKeyOutRightProcess(n):this.translateAndSortKeyProcess(n,!1,!1),this.clearContainer2(),t=[],!0&&(u=0,MemberSite.Web.oddsCriteria.oddsPageCode!==MemberSite.Web.oddsConst.OutrightPage&&n.length>3))for(r=f=0,s=n.length;f<s;r=++f)if(o=n[r],u+=o.Matches.length,u>=10){t=n.splice(r+1,n.length-r-1);break}i.css("display","");this.renderWithHeader2(n);setTimeout(function(){return function(){i.find("#clone").remove()}}(this),0);this.oddsData=[];this.storeLeagueMatchData(n);this.afterMatchCountChanged();this.favouritesUpdateGUIRefreshAll(n);this.subscribeChannel();this.generalClickEvent();t.length>0&&setTimeout(function(n){return function(){n.renderWithHeader2(t);n.storeLeagueMatchData(t);n.processAfterPartialRenderOddsDisplay(t)}}(this),200);this.publishFinishRenderedModules();return}n?(this.clearContainer(),i.find("#clone").remove(),i.css("display","none"),MemberSite.Web.oddsCriteria.oddsPageCode===MemberSite.Web.oddsConst.OutrightPage?this.showNoMatchString():MemberSite.Web.oddsCriteria.market===2&&MemberSite.Web.oddsCriteria.openParlay!==1?this.showNoMatchString():MemberSite.Web.oddsCriteria.market===0&&MemberSite.Web.oddsCriteria.openParlay!==1&&((this.sport===43||this.sport===44)&&(MemberSite.Web.oddsCriteria.virtualSoccerMatchDay===31||MemberSite.Web.oddsCriteria.virtualBasketballMatchDay===31)?(MemberSite.Web.oddsUI.oddsModules[0].oddsData=[],this.showNoMatchStringRaw()):this.market===0&&MemberSite.Web.oddsUI.getVisibleOddsDisplayModulesCount()===0&&this.showNoMatchString())):MemberSite.Web.webUtil.log("cannot render display:Data error");this.subscribeChannel();this.publishFinishRenderedModules();return},t.prototype.translateAndSortKeyOutRightProcess=function(){},t.prototype.translateAndSortKeyProcess=function(n,t,i){var f,h,e,r,s,u,o,w,c,l,a,v,b,k,d,g,y,p;for(f=MemberSite.Web.oddsCriteria.getCriteria(),w=MemberSite.Web.oddsUI.getSelectedJSLanguage(),c=0,b=n.length;c<b;c++)for(h=n[c],y=h.Matches,l=0,k=y.length;l<k;l++)if(e=y[l],this.translateLiveAndHT(e,w),e.SortKey=f.SortingType===0?e.SortKey2[0]+"#"+h.LeagueName[f.Language]+"#"+e.SortKey2[1]+"#"+e.SortKey2[2]+"#"+e.HomeTeam[f.Language]:e.SortKey2[2]+"#"+e.SortKey2[0]+"#"+h.LeagueName[f.Language]+"#"+e.SortKey2[1]+"#"+e.HomeTeam[f.Language],o=f.OddsType,t)for(p=e.OddsLines,a=0,d=p.length;a<d;a++)for(u=p[a],s=[],f.SportId===0?f.OddsPageCode===0?(s=[u.FTAH,u.FTOU,u.FHAH,u.FHOU],f.ViewType===1&&s.push(u.SHAH,u.SHOU)):f.OddsPageCode===4&&(s=[u.FT,u.FH,u.SH]):s=f.SportId===1?[u.FTAH,u.FTOU,u.FTOE,u.FHAH,u.FHOU,u.FHOE]:f.SportId===8?[u.FTAH,u.FTOU,u.FHAH,u.FHOU]:[u.FTAH,u.FTOU,u.FTOE],v=0,g=s.length;v<g;v++)if(r=s[v],r)if(r.HomeOddsStr){if(i&&(MemberSite.Web.oddsCriteria.vipSpread>0||MemberSite.Web.oddsCriteria.memberVIPSpread>0)&&(r.HomeOddsStr=MemberSite.Web.oddsUtil.convertMalayOddsToVIPOdds(r.HomeOddsStr,MemberSite.Web.oddsCriteria.vipSpread+MemberSite.Web.oddsCriteria.memberVIPSpread),r.AwayOddsStr=MemberSite.Web.oddsUtil.convertMalayOddsToVIPOdds(r.AwayOddsStr,MemberSite.Web.oddsCriteria.vipSpread+MemberSite.Web.oddsCriteria.memberVIPSpread),Math.abs(r.HomeOddsStr)<=.05||Math.abs(r.AwayOddsStr)<=.05)){r.HandicapStr="";r.HomeOddsStr="";r.AwayOddsStr="";continue}o!==MemberSite.Web.oddsConst.MalayOdds&&(r.HomeOddsStr=MemberSite.Web.oddsUtil.adjustFromMalayOddsType(r.HomeOddsStr,o),r.AwayOddsStr=MemberSite.Web.oddsUtil.adjustFromMalayOddsType(r.AwayOddsStr,o),r.HomeOddsClassTag="",r.AwayOddsClassTag="",o===MemberSite.Web.oddsConst.IndoOdds&&(MemberSite.Web.oddsUtil.isNeedMakeRedToMinusOddsForIndoOdds(r.HomeOddsStr)&&(r.HomeOddsClassTag="oddsRed"),MemberSite.Web.oddsUtil.isNeedMakeRedToMinusOddsForIndoOdds(r.AwayOddsStr)&&(r.AwayOddsClassTag="oddsRed")))}else if(r.OddStr){if(i&&(MemberSite.Web.oddsCriteria.vipSpread>0||MemberSite.Web.oddsCriteria.memberVIPSpread>0)&&(r.OddStr=MemberSite.Web.oddsUtil.convertMalayOddsToVIPOdds(r.OddStr,MemberSite.Web.oddsCriteria.vipSpread+MemberSite.Web.oddsCriteria.memberVIPSpread),r.EvenStr=MemberSite.Web.oddsUtil.convertMalayOddsToVIPOdds(r.EvenStr,MemberSite.Web.oddsCriteria.vipSpread+MemberSite.Web.oddsCriteria.memberVIPSpread),Math.abs(r.OddStr)<=.05||Math.abs(r.EvenStr)<=.05)){r.OddStr="";r.EvenStr="";continue}o!==MemberSite.Web.oddsConst.MalayOdds&&(r.OddStr=MemberSite.Web.oddsUtil.adjustFromMalayOddsType(r.OddStr,o),r.EvenStr=MemberSite.Web.oddsUtil.adjustFromMalayOddsType(r.EvenStr,o),r.OddClassTag="",r.EvenClassTag="",o===MemberSite.Web.oddsConst.IndoOdds&&(MemberSite.Web.oddsUtil.isNeedMakeRedToMinusOddsForIndoOdds(r.OddStr)&&(r.OddClassTag="oddsRed"),MemberSite.Web.oddsUtil.isNeedMakeRedToMinusOddsForIndoOdds(r.EvenStr)&&(r.EvenClassTag="oddsRed")))}},t.prototype.translateLiveAndHT=function(n,t){var i,f,r,u,s,h,e,o;if(this.market===MemberSite.Web.oddsConst.TodayMarket)for(e=n.OddsLines,r=0,s=e.length;r<s;r++)i=e[r],$.trim(i.Score).toLowerCase()==="live"&&(i.Score=t.live);else if(this.market===MemberSite.Web.oddsConst.LiveMarket)for(o=n.OddsLines,u=0,h=o.length;u<h;u++)i=o[u],f=$.trim(i.Time).toLowerCase(),f==="ht"?i.Time=t.ht:f==="live"&&(i.Time=t.live)},t.prototype.publishFinishRenderedModules=function(){return $.publish("finishRenderedModules",[this.oddsPageKey])},t.prototype.showNoMatchString=function(){MemberSite.Web.oddsUI.isNoMatchStringOrNoFavouriteMatchString()||this.showNoMatchStringRaw()},t.prototype.showNoMatchStringRaw=function(){var t,n,i;n="#"+this.container;t=$(n);t.empty();this.renderHeaderTemplate([],n);i=MemberSite.Web.oddsUI.getNoMatchString();$(i).appendTo(n);t.css("display","")},t.prototype.checkRemoveNoMatchString=function(){$("#oddsPageLayout .noMatchString").length>0&&$("#favNoMatch").length>0&&($("#oddsPageLayout .noMatchString").remove(),$("#favNoMatch").remove())},t.prototype.addOrRemoveBetClickClass=function(){var n;n="#"+this.container;MemberSite.Web.oddsCriteria.isUserLogin===!1&&$(n).find(".betDiv").removeClass("betClick")},t.prototype.favouritesUpdateGUIRefreshAll=function(n){this.isNeedUpdateFavouritesAfterRefresh()===!0&&MemberSite.Web.favourite.updateFavouriteGUIRefreshAll(this.sport,this.market,this.container,n)},t.prototype.renderHeaderTemplate=function(n){this.renderWithHeader2(n)},t.prototype.renderWithHeader=function(n){var t,i;t=MemberSite.Web.oddsCriteria.getCriteria();i=this.oddsPageKey;t.SportId===0&&(t.ExtraFilter===MemberSite.Web.oddsConst.WC2014?i="S200"+this.oddsPageKey.substring(2):t.ExtraFilter===MemberSite.Web.oddsConst.Corner&&(i="S201"+this.oddsPageKey.substring(2)));document.getElementById(this.container).innerHTML=MemberSite.Web.resig.render2(this.oddsPageKey,n,i)},t.prototype.renderWithHeader2=function(n){var r,i,t,u,f;t=MemberSite.Web.oddsCriteria.getCriteria();this.setCriteriaData(t);f=t.Language===3||t.Language===4?t.OddsPageCode===0?t.ViewType===0||t.ViewType===2?".soccerHeaderThai":".soccerHeader":".soccerHeader":".soccerHeader";r=$("#oddsPageLayout .noMatchString");r.length>0&&(r.siblings(f).remove(),r.remove());i="#"+this.container;$(i).find(f).length===0&&(u=this.oddsPageKey,t.SportId===0&&(t.ExtraFilter===MemberSite.Web.oddsConst.WC2014?u="S200"+this.oddsPageKey.substring(2):t.ExtraFilter===MemberSite.Web.oddsConst.Corner&&(u="S201"+this.oddsPageKey.substring(2))),$(MemberSite.Web.resig.renderHeader(u)).appendTo(i));n&&n.length>0?(this.checkRemoveNoMatchString(),this.renderleagueArray(n,i)):this.appendLeagueToContainer([],i)},t.prototype.appendLeagueToContainer=function(n,t){var i;i=MemberSite.Web.resig.renderOddsDisplayModule(this.oddsPageKey,n);$(i).appendTo(t)},t.prototype.renderleagueArray=function(n,t){for(var r,i=0,u=n.length;i<u;i++)r=n[i],this.appendLeagueToContainer([r],t)},t.prototype.renderleagueArrayBySetTimeout=function(n,t){setTimeout(function(i){return function(){i.appendLeagueToContainer(n,t)}}(this),200)},t.prototype.storeLeagueMatchData=function(n){var f,e,t,i,r,o,s,u;if(n===null||n.length===0){this.oddsData=[];return}if(this.oddsPageCode===MemberSite.Web.oddsConst.OutrightPage)this.oddsData=n;else for(f=(new Date).getTime(),i=0,o=n.length;i<o;i++)for(e=n[i],u=e.Matches,r=0,s=u.length;r<s;r++)t=u[r],t.OddsLines=null,t.LastPushTime=f,this.oddsData.push(t)},t.prototype.partialRefreshNewMatches=function(n,t,i){var r,u;r=MemberSite.Web.oddsCriteria.getCriteria();(r.Market===MemberSite.Web.oddsConst.Favourite||r.ActiveMatchFilter)&&(n.NewMatches=this.cleanUpNontargetedMatches(n.NewMatches,this.matchIds));n.NewMatches&&n.NewMatches.length>0&&(this.setCriteriaData(r),u=r,u.MatchIds=n.NewMatches,u.LastRefreshTime=t?MemberSite.Web.oddsUI.pagePreviousLastPullTime:null,MemberSite.Web.webUtil.getServerData("GetOddsDataByMatchIds",u,function(n){return function(t){var s,h,e,u,f,c,l,o;if(t!==null&&t.length>0&&r.Market!==MemberSite.Web.oddsConst.Favourite){if(i){for(e=[],u=0,c=t.length;u<c;u++)for(s=t[u],o=s.Matches,f=0,l=o.length;f<l;f++)h=o[f],e.push(h.MatchId);n.partialRefreshClosedMatches(e)}n.translateAndSortKeyProcess(t,!0,!1);n.partialRenderOddsDisplay2(t);n.processAfterPartialRenderOddsDisplay(t)}}}(this)))},t.prototype.partialRefreshClosedMatches=function(n){this.removeCloseMatches(n);this.afterMatchCountChanged()},t.prototype.cleanFirstPartialRefreshOddsDisplay=function(n){var t;t={CloseMatches:[],ZeroOddsMatches:[],NewMatches:[]};t.NewMatches=n;this.partialRefreshNewMatches(t,!1,!0)},t.prototype.partialRefreshOddsDisplay=function(n,t){var e,o,s,h,i,r,c,l,u,f;if(n)try{if(n.CloseMatches&&n.CloseMatches.length>0){for(this.partialRefreshClosedMatches(n.CloseMatches),u=n.CloseMatches,i=0,c=u.length;i<c;i++)e=u[i],o={MatchId:e,StatusFlag:"2"};MemberSite.Web.leftPanelBetClickProcessor.leftPanelBetClickedUpdateNotifier(o)}if(n.ZeroOddsMatches&&n.ZeroOddsMatches.length>0)for(f=n.ZeroOddsMatches,r=0,l=f.length;r<l;r++)h=f[r],n.NewMatches.push(h);n.NewMatches&&n.NewMatches.length>0&&this.partialRefreshNewMatches(n,t,!1)}catch(a){s=a;MemberSite.Web.webUtil.log(s)}},t.prototype.processAfterPartialRenderOddsDisplay=function(n){this.isNeedUpdateFavouritesAfterRefresh()===!0&&MemberSite.Web.favourite.updateFavouriteGUIRefreshPartial(this.sport,this.market,this.container,n);this.afterMatchCountChanged()},t.prototype.cleanUpNontargetedMatches=function(n,t){var e,u,f,o,i,r,s,h;try{if(t&&n){for(u=[],i=0,s=n.length;i<s;i++)for(f=n[i],r=0,h=t.length;r<h;r++)if(o=t[r],o===f){u.push(f);break}return u}}catch(c){e=c;MemberSite.Web.webUtil.log(e)}},t.prototype.partialRenderOddsDisplay2=function(n){var e,o,i,t,r,u,s,h,f;try{if(n===null||n.length===0)return;for(r=0,s=n.length;r<s;r++)if(i=n[r],this.filterSelectedLeague(i))for(f=i.Matches,u=0,h=f.length;u<h;u++)t=f[u],this.filterCornerMatch(t)&&this.filterActiveMatchFilterAndFavouriteAndFilterDay(t)&&this.filterEuro2016Match(t)&&this.filterOlympicsMatch(t)&&(o=this.getMatchInsertionPoint(t),this.addMatchOnScreen(o,i))}catch(c){e=c;MemberSite.Web.webUtil.log(e)}},t.prototype.filterActiveMatchFilterAndFavouriteAndFilterDay=function(n){var l,a,t,e,o,r,u,s,i,v,h,f,y,c;if(t=MemberSite.Web.oddsCriteria.getCriteria(),t.OpenParlay===1)return n.OpenParlay===1;if(t.ActiveMatchFilter||t.Market===MemberSite.Web.oddsConst.Favourite){if(this.oddsData.length>0){for(o=!1,c=this.oddsData,f=0,y=c.length;f<y;f++)if(a=c[f],a.MatchId===n.MatchId){o=!0;break}return o?!0:!1}return!1}return t.Market===MemberSite.Web.oddsConst.TodayMarket?(s=parseInt($("#selFilterPeriod").val()),s>0?(l=moment.utc().subtract(4,"h").set("h",0).set("m",0).set("s",0),h=moment(l).add(s*4,"h"),v=moment(h).add(4,"h"),u=moment().range(h,v),r=new Date(parseInt(n.MatchDate.substr(6))),u.contains(r)):!0):t.Market===MemberSite.Web.oddsConst.EarlyMarket?(t.FilterDay>=1?(i=moment.utc().set("h",0).set("m",0).set("s",0).add(t.FilterDay,"d"),e=moment(i).add(1,"d")):(i=moment.utc().set("h",0).set("m",0).set("s",0).add(1,"d"),e=moment(i).add(1,"y")),u=moment().range(i,e),r=new Date(parseInt(n.MatchDate.substr(6))),u.contains(r)):!0},t.prototype.filterSelectedLeague=function(n){var i,r,f,t,e,u;if(i=MemberSite.Web.oddsCriteria.getCriteria(),i.LeagueIdList[0]===-1)return!0;for(r=!1,u=i.LeagueIdList,t=0,e=u.length;t<e;t++)if(f=u[t],n.LeagueId===f){r=!0;break}return r?!0:!1},t.prototype.filterCornerMatch=function(n){var t;return t=MemberSite.Web.oddsCriteria.getCriteria(),t.SportId!==0||t.ExtraFilter!==MemberSite.Web.oddsConst.Corner||n.CalculationModel===MemberSite.Web.oddsConst.CornerModel},t.prototype.filterEuro2016Match=function(n){var t;return t=MemberSite.Web.oddsCriteria.getCriteria(),t.SportId!==0||t.ExtraFilter!==MemberSite.Web.oddsConst.Euro2016||n.IsEuro2016Match},t.prototype.filterOlympicsMatch=function(n){var t;return t=MemberSite.Web.oddsCriteria.getCriteria(),t.SportFilter===0||n.IsOlympicMatch},t.prototype.getMatchInsertionPoint=function(n){var u,e,o,c,t,f,i,r,s,h;if(i=$.extend(!0,{},n),i.OddsLines=null,i.LastPushTime=(new Date).getTime(),this.oddsData===null||this.oddsData.length===0)return this.oddsData=[],this.oddsData.push(i),{code:0,above:null,below:null,current:n};for(r=0,c=n,u=null,e=null,f=this.oddsData.length-1,t=s=0;s<=f;t=s+=1)if(o=this.oddsData[t],o.MatchId===i.MatchId){t>0&&(u=this.oddsData[t-1]);f>t&&(e=this.oddsData[t+1]);this.oddsData[t]=i;r=1;break}if(r===0)for(t=h=0;h<=f;t=h+=1)if(o=this.oddsData[t],o.SortKey>i.SortKey){t>0&&(u=this.oddsData[t-1]);e=this.oddsData[t];this.oddsData.splice(t,0,i);r=2;break}return r===0&&(this.oddsData.push(i),u=this.oddsData[f],r=3),{code:r,above:u,below:e,current:c}},t.prototype.addMatchOnScreen=function(n,t){var u,i,r;if(u="#"+this.container,i=$.extend(!0,{},t),i.Matches=[n.current],r=n.current,n.code===1){this.insertMatchAtTargetPlace(t,r,n.current.MatchId,null);return}n.above===null&&n.below===null?this.renderOddsDisplay([i]):n.above===null?n.below.LeagueId===n.current.LeagueId?this.insertMatchAtTargetPlace(t,r,n.below.MatchId,!0):this.insertLeagueAtTargetPlace(i,n.below.LeagueId,n.below.MatchId,!0):n.below===null?n.above.LeagueId===n.current.LeagueId?this.insertMatchAtTargetPlace(t,r,n.above.MatchId,!1):this.insertLeagueAtTargetPlace(i,n.above.LeagueId,n.above.MatchId,!1):n.above.LeagueId===n.current.LeagueId?this.insertMatchAtTargetPlace(t,r,n.above.MatchId,!1):n.below.LeagueId===n.current.LeagueId?this.insertMatchAtTargetPlace(t,r,n.below.MatchId,!0):n.above.LeagueId===n.below.LeagueId?this.sandwitchLeagueTargetLeague(i,n):this.insertLeagueAtTargetPlace(i,n.above.LeagueId,n.above.MatchId,!1)},t.prototype.insertMatchAtTargetPlace=function(n,t,i,r){var f,c,l,a,e,s,u,v,h,o,y;if(s="#"+this.container+" #m"+i+":first",f=MemberSite.Web.resig.renderOddsDisplayModule(this.oddsPageKey+"Match",{parent:n,current:t}),u=$(s),r===null){if(a=this.checkNProcessScoreUpdate(u,t),u.replaceWith(f),a){for(c=$(s),h=$(c).find("div.time"),e=[],o=0,y=h.length;o<y;o++)v=h[o],l=$(v).find(".scoreDiv"),e.push(l[0]);e.length>0&&MemberSite.Web.oddsUtil.hilightChanges(e)}}else r?(this.checkAndRemoveIfNewMatchAlreadyExisted(t.MatchId),u.before(f)):(this.checkAndRemoveIfNewMatchAlreadyExisted(t.MatchId),u.after(f))},t.prototype.insertLeagueAtTargetPlace=function(n,t,i,r){var u,e,s,h,o,f,c;for(h="#"+this.container+" #lg"+t,e=MemberSite.Web.resig.renderOddsDisplayModule(this.oddsPageKey,[n]),o=$(h),f=0,c=o.length;f<c;f++)if(u=o[f],s=$(u).find("#m"+i),s.length>0){r?(this.checkAndRemoveIfNewMatchAlreadyExisted(n.Matches[0].MatchId),$(u).before(e)):(this.checkAndRemoveIfNewMatchAlreadyExisted(n.Matches[0].MatchId),$(u).after(e));break}},t.prototype.sandwitchLeagueTargetLeague=function(n,t){var i,o,r,s,f,e,h,a,c,u,l;for(c=t.above.LeagueId,h="#"+this.container+" #lg"+c,s=MemberSite.Web.resig.renderOddsDisplayModule(this.oddsPageKey,[n]),e=$(h),a=null,u=0,l=e.length;u<l;u++)if(r=e[u],f=$(r).find("#m"+t.above.MatchId),f.length>0){this.checkAndRemoveIfNewMatchAlreadyExisted(n.Matches[0].MatchId);i=r.cloneNode(!1);$(i).append($(f).nextAll());o=$(r).children(":first").clone();$(i).prepend(o);$(r).after(i);$(i).before(s);break}},t.prototype.checkAndRemoveIfNewMatchAlreadyExisted=function(n){var i,t;try{t=$("#"+this.container).find("#m"+n);t.length>0&&this.removeCloseMatch(n)}catch(r){i=r}},t.prototype.checkNProcessScoreUpdate=function(n,t){var i,r,u;return i=!1,this.market===1&&(u=$(n).find("div.time"),r=$(u[0]).children(":first").children(":first"),i=MemberSite.Web.webUtil.updateIfChangePartial(r[0],t.OddsLines[0].Score)||r.hasClass("hilightChangesColor")?!0:!1),i},t.prototype.afterMatchCountChanged=function(){var n,t;this.oddsData&&this.oddsData.length===0&&(t="#"+this.container,n=$(t),n.empty(),n.css("display","none"))},t.prototype.removeCloseMatches=function(n){for(var i,t=0,r=n.length;t<r;t++)i=n[t],this.removeCloseMatch(i)},t.prototype.removeCloseMatch=function(n){var t,r,i,u;r=$("#"+this.container).find("#m"+n);r.length>0?(t=r.parent(),r.remove(),this.removeMatchInCache(n+""),t.length===1&&t.children().length===1&&(u=t.prev(),i=t.next(),t.remove(),u.attr("id")===i.attr("id")&&(i.children(":first").remove(),u.append(i.html()),i.remove()))):this.removeMatchInCache(n+"")},t.prototype.removeMatchInCache=function(n){for(var r,i,u,t=i=u=this.oddsData.length-1;i>=0;t=i+=-1)if(r=this.oddsData[t],r.MatchId===n){MemberSite.Web.webUtil.arrayRemove(this.oddsData,t);break}},t.prototype.getLeagueIdFromTag=function(n){var t;return(t=n.attr("id"),t&&t.length>2)?t.slice(2):""},t.prototype.clear=function(){var n,t;this.unsubscribeChannel();this.container&&(t="#"+this.container,n=$(t),n.unbind("click"),n.hide(),n.remove());this.oddsChannel=null;this.matchChannel=null;t=null;this.container=null;this.name=null;this.market=null;this.oddsData=[];this.oddsMsgProcessor=null;this.mainModule=null;this.sport=null;this.oddsPageCode=null;this.viewType=null;this.oddsPageKey=null;this.matchIds=null;this.tableHeader=null},t.prototype.clearContainer=function(){var n,t;t="#"+this.container;n=$(t);n.empty();n.css("display","none")},t.prototype.clearContainer2=function(){var n,t,i;if(i="#"+this.container,n=$(i),n.length!==0)return t=$("<div><\/div>").attr({id:"clone"}).css({width:n.outerWidth(),height:n.outerHeight()}),n[0].innerHTML="",n.prepend(t)},t.prototype.isStringEmptyOrBlank=function(n){return!n||n.length===0||/^\s*$/.test(n)},t.prototype.generalClickEvent=function(){var n,t;t="#"+this.container;n=$(t);n.unbind("click");n.on("click",{currentOddsDisplayModule:this},this.generalClickEventHandler)},t.prototype.generalClickEventHandler=function(n){var r,t,u,f,i;MemberSite.Web.webUtil.cancelBubbleUp(n);i=$(n.target);t=i.attr("feature");f=n.data.currentOddsDisplayModule.sport;u=n.data.currentOddsDisplayModule.market;r="#"+n.data.currentOddsDisplayModule.container;t==="favourites"?(this.favouritesClickEventHandler(n,i,f,u,r),this.sendFavouritesSignalToLeftPanel()):t==="betClick"?this.betClickEventHandler(n,i,f,u,r):t==="moreBetClick"?this.morebetClickEventHandler(n,i,f,u,r):t==="statisticsClick"?this.statisticsClickEventHandler(n,i,f,u,r,!1):t==="liveStatisticsClick"?this.statisticsClickEventHandler(n,i,f,u,r,!0):t==="refreshLeague"&&MemberSite.Web.leftPanelProcessor.refreshPageByCriteria()},t.prototype.favouritesClickEventHandler=function(n,t,i,r,u){var w,p,s,b,f,a,k,e,h,v,l,o,c,y;if(p=t.attr("favouritesType"),p==="MatchFav")o=t,c=o.attr("FavOn"),y=o.closest(".matchDiv").attr("matchId"),h=parseInt(o.closest(".leagueDiv").attr("leagueId")),b=o.closest("#lg"+h),f=b.find(".leagueFavouritesDiv"),e=f.attr("leagueFavOn"),e=MemberSite.Web.favourite.stringToBoolConverter(e),c=MemberSite.Web.favourite.stringToBoolConverter(c),MemberSite.Web.favourite.matchFavClicked(o,c,y,h,e,i,r,u,this),MemberSite.Web.favourite.setMatchFavOnGUI(o),r===0||r===2?MemberSite.Web.favourite.favToggleClassGUI(o):MemberSite.Web.favourite.favToggleClassGUI2(o),w=MemberSite.Web.favourite.checkAllFavSelected(b),w==="allTrue"?f.attr("leagueFavOn")==="false"&&(e=!0,MemberSite.Web.favourite.setLeagueFavOnObj(o,c,y,h,e,i,r),MemberSite.Web.favourite.setLeagueFavOnGUI(f),MemberSite.Web.favourite.leaguefavToggleClassGUI(f)):w==="allFalse"?f.attr("leagueFavOn")==="true"&&(MemberSite.Web.favourite.setLeagueFavOnObj(o,c,y,h,!1,i,r),MemberSite.Web.favourite.setLeagueFavOnGUI(f),MemberSite.Web.favourite.leaguefavToggleClassGUI(f)):f.attr("leagueFavOn")==="true"&&(e=!1,MemberSite.Web.favourite.setLeagueFavOnObj(o,c,y,h,e,i,r),MemberSite.Web.favourite.setLeagueFavOnGUI(f),MemberSite.Web.favourite.leaguefavToggleClassGUI(f));else if(p==="LeagueFav")for(f=t,h=parseInt(f.closest(".leagueDiv").attr("leagueId")),k=$(u).find('[id="lgFav'+h+'"]'),s=0;s<k.length;)MemberSite.Web.favourite.leagueFavDivDuplicatesProcessor($(k[s]),i,r,u,this),s++;else if(p==="MarketFav")if(v=t,l=$(v).attr("marketFavOn"),l=MemberSite.Web.favourite.stringToBoolConverter(l),a=$(u).find(".leagueFavouritesDiv"),s=0,MemberSite.Web.oddsCriteria.market===MemberSite.Web.oddsConst.Favourite)MemberSite.Web.favourite.marketFavouriteProcessor_Market(a,v,l,i,r,u,this);else{while(s<a.length)e=$(a[s]).attr("leagueFavOn"),e=MemberSite.Web.favourite.stringToBoolConverter(e),e===l&&MemberSite.Web.favourite.leagueFavDivDuplicatesProcessor($(a[s]),i,r,u),s++;MemberSite.Web.favourite.setMarketFavOnObj(i,r,!l);MemberSite.Web.favourite.setFavouritesStorage();MemberSite.Web.favourite.setMarketFavOnGUI(v);MemberSite.Web.favourite.marketfavToggleClassGUI(v)}},t.prototype.betClickEventHandler=function(n,t,i,r){MemberSite.Web.leftPanelBetClickProcessor.betClickEventHandler(n,t,i,r,"","matchDiv",MemberSite.Web.oddsCriteria.getCriteria())},t.prototype.morebetClickEventHandler=function(n,t){var r,i,u,f,e;f=t[0];i=$(f).closest(".matchDiv");u=$(i).attr("MatchId");e=$(i).attr("SportId");r=$(i).attr("Market");MemberSite.Web.moreBetPageProcessor.initialize(parseInt(r),parseInt(u),parseInt(e))},t.prototype.statisticsClickEventHandler=function(n,t,i,r,u,f){var h,c,e,l,s,a,o,v;if(a=t[0],l=$(a).closest(".matchDiv"),s=parseInt($(l).attr("MatchId")),h=$(l).find(".UEFA2016Div").attr("betradermatchid"),e=MemberSite.Web.oddsCriteria.language,o="",i===43)o=MemberSite.Web.serverData.root+"Statistics/vfl?lang="+e+"&id="+s;else if(i===44)o=MemberSite.Web.serverData.root+"Statistics/vbl?lang="+e+"&id="+s;else{if(a.className.indexOf("UEFA2016Div")>=0)return c=e===0?"en":e===1||e===2?"zh":e===3?"th":e===6?"id":"en",v=MemberSite.Web.serverData.betRadar_WC2014Url+c+"/Europe:Berlin/page/euro/matches#matchId="+h,window.open("http://sbdemo.inplaymatrix.com/euro2016.html?matchid="+h+"&euroLang="+c,"UEFAWindow","width=1177,height=715,top=0,left=0,scrollbars=1,menubar=0,status=0,toolbar=0,resizable=1,location=0,directories=0");o=MemberSite.Web.serverData.root+"Statistics/?id="+s+"&lang="+e+"&isLive="+f}window.open(o,"Statistics","width=1024,height=600,top=0,left=0,scrollbars=1,menubar=0,status=0,toolbar=0,resizable=1,location=0,directories=0")},t.prototype.isParlayIntToBooleanConverter=function(n){return n===1?!0:!1},t.prototype.isStringEndsWith=function(n,t){return n.indexOf(t,n.length-t.length)!==-1},t.prototype.dateAddMinutes=function(n,t){return new Date(n.getTime()+t*6e4)},t.prototype.wc2014IconClickEventHandler=function(n,t){var i;i=MemberSite.Web.serverData.betRadar_WC2014Url+n+"_"+t;window.open(i,"WC2014Window","width=1090,height=610,top=0,left=0,scrollbars=1,menubar=0,status=0,toolbar=0,resizable=1,location=0,directories=0")},t}();MemberSite.Classes.oddsDisplayModule=t}.call(this),function(){var n;n=function(){function n(){}return n.prototype.getBlockBoxValue=function(n){var i,r,u,t,e,o,s,h,c,f,a=this;e="ioBlackBox";c=!1;s=12;h=!1;o=!0;try{i=ioGetBlackbox();i&&(r=i.blackbox);MemberSite.Web.webUtil.log("BlackBoxValue = "+r)}catch(l){t=l;console.log("ERROR:\nType: "+t.type+"\nArgs: "+t.arguments+"\nMessage: "+t.message);console.log("\nSTACKTRACE:\n",t.stack)}return u=MemberSite.Web.oddsCriteria.companyId,f=MemberSite.Web.oddsCriteria.memberCode,MemberSite.Web.webUtil.getServerData2(MemberSite.Web.serverData.root+"Sportsbook/LogMemberDeviceInfo",{applicationPoint:n,companyId:u,memberCode:f,blackBoxValue:r},function(){})},n}();MemberSite.Web.GetBlackBoxValue=new n(jQuery)}.call(this)