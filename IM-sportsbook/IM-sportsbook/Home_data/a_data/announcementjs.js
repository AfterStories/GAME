(function(){var n,t=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};n=function(){function n(n){this.$=n}return n.prototype.announcementCriteria={},n.prototype.announcementScrollMarqueeOption={duration:15e3,gap:50,delayBeforeStart:0,direction:"left",duplicated:!1,pauseOnHover:!0},n.prototype.initialize=function(){var n;MemberSite.Web.announcementScroll.unregisterAllModules();n=MemberSite.Web.oddsCriteria.getCriteria();MemberSite.Web.announcementScroll.announcementCriteria={Theme:n.Theme,Language:n.Language,MinEffectiveDate:moment(),MaxEffectiveDate:moment(),UserJavascriptTimeZone:n.UserTimeZone,CompanyId:MemberSite.Web.oddsCriteria.companyId};MemberSite.Web.webUtil.getServerData2(MemberSite.Web.serverData.root+"Announcement/GetAnnouncementInitialScrollData",MemberSite.Web.announcementScroll.announcementCriteria,function(){return function(n){var t;t="";n&&n.length>0&&(t=MemberSite.Web.announcementScroll.getAnnouncementContentString(n));t.length>0?(MemberSite.Web.announcementScroll.initialAnnouncementMarquee(t),MemberSite.Web.hubClient.subscribe("/announcementScroll",MemberSite.Web.announcementScroll.processAnnouncementPush)):(MemberSite.Web.announcementScroll.initialAnnouncementMarquee(t),MemberSite.Web.hubClient.subscribe("/announcementScroll",MemberSite.Web.announcementScroll.processAnnouncementPush))}}(this));$("#announcementDiv").on("click",function(n){var t,i,r;t=MemberSite.Web.announcementScroll.announcementCriteria;MemberSite.Web.webUtil.cancelBubbleUp(n);t.MinEffectiveDate=moment.utc().subtract("days",7);t.MaxEffectiveDate=moment.utc();r=MemberSite.Web.oddsConst.theme.findIndexOfStringElement(t.Theme);i=MemberSite.Web.serverData.root+"Announcement/GetAnnouncementListView?";i+="Theme="+r;i+="&Language="+t.Language;i+="&MinEffectiveDate="+t.MinEffectiveDate.format("YYYY/MM/DD hh:mm:ss a");i+="&MaxEffectiveDate="+t.MaxEffectiveDate.format("YYYY/MM/DD hh:mm:ss a");i+="&UserJavascriptTimeZone="+t.UserJavascriptTimeZone;i+="&CompanyId="+t.CompanyId;window.open(i,"Announcement","width=830,height=700,top=0,left=0,scrollbars=1,menubar=0,status=0,toolbar=0,resizable=1,location=0,directories=0")})},n.prototype.initialAnnouncementMarquee=function(n){$("#announcementScroll").html(n);$("#announcementDiv").css("display","block");$("#announcementScroll").marquee(MemberSite.Web.announcementScroll.announcementScrollMarqueeOption);$("#announcementScroll").on("finished",function(){$.publish("finishUIAnnouncementScroll",{})})},n.prototype.processAnnouncementPush=function(n){MemberSite.Web.webUtil.log(n);$.unsubscribe("finishUIAnnouncementScroll");$.subscribe("finishUIAnnouncementScroll",function(t,i){var r,u;MemberSite.Web.webUtil.log(i);r="";n&&n.length>0&&(r=MemberSite.Web.announcementScroll.getAnnouncementContentString(n));u=$("#announcementScroll");u.marquee("destroy");u.html(r).marquee(MemberSite.Web.announcementScroll.announcementScrollMarqueeOption);$.unsubscribe("finishUIAnnouncementScroll")})},n.prototype.getAnnouncementContentString=function(n){var r,t,u,f,i,e;for(f=MemberSite.Web.announcementScroll.announcementCriteria.Language,u=0,f<2&&(u=f),t="",i=0,e=n.length;i<e;i++)r=n[i],MemberSite.Web.announcementScroll.isInAllowCompany(r)&&(t+=r.AnnouncementContentList[u],t+=MemberSite.Web.announcementScroll.getSpanSpaceString());return t},n.prototype.getSpanSpaceString=function(){for(var t="<span>",n=0;n<2;)t+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",n++;return t+"<span>"},n.prototype.isInAllowCompany=function(n){var i;return i=MemberSite.Web.oddsCriteria.companyId,t.call(n.AllowCompanyIdArray,i)>=0||n.AllowCompanyIdArray[0]===-1},n.prototype.unregisterAllModules=function(){$("#announcementScroll").off("finished");$("#announcementScroll").marquee("destroy");$("#announcementDiv").off("click");MemberSite.Web.announcementScroll.announcementCriteria={}},n}();MemberSite.Web.announcementScroll=new n(jQuery)}).call(this),function(){var n;n=function(){function n(n){this.$=n}return n.prototype.announcementHTMLTemplateArray={},n.prototype.announcementCriteria={},n.prototype.initialize=function(n,t,i,r,u,f){var o,s,e;MemberSite.Web.announcementList.unregisterModules();s=MemberSite.Web.resig;MemberSite.Web.announcementList.announcementHTMLTemplateArray.announcementContainerTemplate=s.compileTemplate($("#announcementContainerTemplate").html());MemberSite.Web.announcementList.announcementHTMLTemplateArray.announcementDataRowTemplate=s.compileTemplate($("#announcementDataRowTemplate").html());$("#announcementListContainer").html("");$("#announcementListContainer").append(this.announcementHTMLTemplateArray.announcementContainerTemplate());e=new Date;o=new Date(e.getFullYear(),e.getMonth(),0).getDate()-1;$("#announcementMinDateCalender").datepicker({minDate:-o,maxDate:e,dateFormat:"dd-mm-yy",onSelect:function(n){$("#announcementMaxDateCalender").datepicker("option","minDate",n)}});$("#announcementMaxDateCalender").datepicker({minDate:-o,maxDate:e,dateFormat:"dd-mm-yy",onSelect:function(n){$("#announcementMinDateCalender").datepicker("option","maxDate",n)}});$("#announcementMinDateCalenderIcon").on("click",function(){$("#announcementMinDateCalender").datepicker("show")});$("#announcementMaxDateCalenderIcon").on("click",function(){$("#announcementMaxDateCalender").datepicker("show")});MemberSite.Web.announcementList.announcementCriteria={Theme:n,Language:t,MinEffectiveDate:moment.utc(i).format("YYYY/MM/DD hh:mm:ss a"),MaxEffectiveDate:moment.utc(r).format("YYYY/MM/DD hh:mm:ss a"),UserJavascriptTimeZone:u,CompanyId:f};$("#announcementCriteriaSubmit").on("click",function(){var n,t,i;n=MemberSite.Web.announcementList.announcementCriteria;MemberSite.Web.webUtil.cancelBubbleUp(event);i=$("#announcementMinDateCalender").datepicker("getDate");t=$("#announcementMaxDateCalender").datepicker("getDate");i&&t&&(n.MinEffectiveDate=moment.utc(i).format("YYYY/MM/DD hh:mm:ss a"),n.MaxEffectiveDate=t.getDate()===(new Date).getDate()?moment.utc().format("YYYY/MM/DD hh:mm:ss a"):moment.utc(t).add("hours",23).add("minutes",59).format("YYYY/MM/DD hh:mm:ss a"),MemberSite.Web.announcementList.getAnnouncementListByDateRange(n))});MemberSite.Web.announcementList.getAnnouncementListByDateRange(MemberSite.Web.announcementList.announcementCriteria)},n.prototype.getAnnouncementListByDateRange=function(n){MemberSite.Web.webUtil.getServerData2(MemberSite.Web.serverData.root+"Announcement/GetAnnouncementListByDateRange",n,function(){return function(t){$("#announcementDataContainer").html("");t&&t.length>0?$("#announcementDataContainer").append(MemberSite.Web.announcementList.announcementHTMLTemplateArray.announcementDataRowTemplate(t)):$("#announcementDataContainer").html(MemberSite.Web.serverData.getLanguageStrings(n.Language).noAnnouncementList)}}(this))},n.prototype.unregisterModules=function(){$("#announcementMinDateCalender").datepicker("destroy");$("#announcementMaxDateCalender").datepicker("destroy");$("#announcementCriteriaSubmit").off("click");$("#announcementMinDateCalenderIcon").off("click");$("#announcementMaxDateCalenderIcon").off("click");MemberSite.Web.announcementList.announcementHTMLTemplateArray={};MemberSite.Web.announcementList.announcementCriteria={}},n}();MemberSite.Web.announcementList=new n(jQuery)}.call(this)