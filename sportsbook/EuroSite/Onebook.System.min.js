var Onebook=Onebook||{};Onebook.Namespace=function(t){var e,n=t.split("."),o=Onebook;for("Onebook"===n[0]&&(n=n.slice(1)),e=0;e<n.length;e+=1)"undefined"==typeof o[n[e]]&&(o[n[e]]={}),o=o[n[e]];return o},Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,o=function(){},r=function(){return n.apply(this instanceof o&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,r.prototype=new o,r}),function(t){var e=function(t,e,n){var o;for(o in e)o in t&&(!n||t.hasOwnProperty(o))||(t[o]=e[o]);return t},n=function(t,n){var o,r;if("function"!=typeof t){if("function"!=typeof n)return o=t.__proto__,e(t,o),e(t,n),t;throw"object can't inherit from function"}return o=t.prototype,r=function(){"use strict";var a,i,u=function(t,e){var n,o;return n=Array.prototype.slice.call(e,0),n.unshift(t),new(o=t.bind.apply(t,n))},s=function(){if(void 0!==a)return a;throw a=u(n,arguments)},d=function(e){return e===r||e===t||e===n?!0:this.base().instanceOf?this.base().instanceOf(e):!1},c=[],f=function(t){c.push(t.base),t.base=s},h=function(t){var e=c.pop(t.base);void 0===e?delete t.base:t.base=e};"function"!=typeof n&&(a=n),f(t.prototype);try{i=u(t,arguments)}catch(l){if(l!==a)throw l;f(a),t.prototype=a,i=u(t,arguments),t.prototype=o,h(a),void 0===i.__proto__&&(i.__inherit_proto__=a),i=e(i,o,!0)}if(void 0===a)throw"ChildClass must call ParentClass's constructor 'this.base()'";return h(t.prototype),a=s=void 0,i.base=function(){return this.__proto__||this.__inherit_proto__},i.instanceOf=d,i}};t.inherit=n}(Onebook),Onebook.Namespace("Identity"),function(t,e){var n={IsUltron:!0,SelectedOddsType:"1",TimeZone:-8,DebugMode:0,SkinRootPath:"template/fun88/",OddsTypeList:[{value:"1",text:"DEC"},{value:"2",text:"HK"},{value:"4",text:"MY"},{value:"5",text:"US"}],CalBettype:[],ByGrpupType:0,Month:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],RefreshCnt:function(t){return"l"==t.FixtureType?5:"Match"==t.Scope?5:10},ZeroOddsArray:[159,406,4,413,26,408,14,6,126,30,414,412,127,171,405,161,162,151,191,13,27,24,407,409,410,411]};Onebook.Identity=e.extend(Onebook.Identity,n)}(window,jQuery),function(t){"use strict";function e(){function o(t){var e={},n={},o=function(n,o){e[n]=(e[n]||0)+1,d(t,n,o)},r=function(e,n,o){c(e,{sender:t,data:n},o)},a=function(t,e){return f(t,e)?(n[t]=e,!0):!1},i=function(t,e,n){return h(t,e,n)},u=function(e,o){var r;if(e)return r=l(t,e,o),void 0!==o&&r===o?o:!n.hasOwnProperty(e)||void 0!==o&&n[e]!==o?r:(r=n[e],l(t,e,r),delete n[e],r)},s=function(){var o;for(o in n)l(t,o,n[o]);for(o in e)l(t,o);e={},n={}};this.id=function(){return t},this.id=t,this.ask=i,this.answer=a,this.send=r,this.receive=o,this.remove=u,this.clear=s}if(this===t)return new e;var r=this,a={},i={},u={},s={},d=function(t,e,n){var o={id:t,cb:n};void 0===a[e]&&(a[e]=[],i[e]={}),void 0===i[e][t]&&(i[e][t]=[]),a[e].push(o),i[e][t].push(o)},c=function(t,e,o){var r,i,u=a[t];if(void 0!==u)for(r=u.length,i=0;r>i;i++)n(u[i].cb,[e])},f=function(t,e){if(void 0===u[t]){if(u[t]=e,void 0!==s[t]){var o,r=s[t],a=r.length;for(s[t]=void 0,o=0;a>o;o++)n(e,r[o])}return!0}return!1},h=function(t,e,o){var r,a=[],i=u[t];if(r=arguments.length,a=Array.prototype.slice.call(arguments,1),void 0!==i){if("function"!=typeof a[r-2])return i(a);n(i,a)}else{if("function"!=typeof a[r-2])return void 0;void 0===s[t]&&(s[t]=[]),s[t].push(a)}},l=function(t,e,n){var o,r,s,d,c;if(s=u[e],void 0===s){if(s=a[e],void 0!==s&&(d=i[e][t],d&&0!==d.length)){for(o=d.length-1;o>=0;o--)if(c=d[o],void 0===n||c.cb===n){if(r=s.indexOf(c),r>=0&&(s.splice(r,1),0===s.length))return delete a[e],delete i[e],c.cb;if(void 0!==n)return d.splice(o,1),0===d.length&&delete i[e][t],n}return void 0===n?(delete i[e][t],d[d.length-1].cb):void 0}}else if(void 0===n||s===n)return delete u[e],s},p=function(t){return t?(delete u[t],delete a[t],void delete i[t]):(u={},a={},void(i={}))},v={},g=function(t){t=t||"#default_client#";var e=v[t];return void 0===e&&(e=new o(t),v[t]=e),e},y=function(t,e){var n,o;n=t?a[t]:a,o=t&&e?i[t]?i[t][e]:void 0:i};return r.version="0.8.0",r.getClient=g,r.check=y,r.clear=p,r}var n=function(t,e){return setTimeout(function(){t.apply(null,e)},1)},o=new e;return e.version=o.version,e.getClient=o.getClient,e.clear=o.clear,t.MessageController=e,e}(window);var Onebook=Onebook||{};!function(t,e){"function"==typeof define&&define.amd?define(e):t.Onebook.Util=e()}(this,function(){"use strict";var t=Onebook.Identity,e={},n=Object.prototype.toString,o=Array.prototype,r=Array.isArray||function(t){n.call(t)===n.call([])},a=function(t){return"function"==typeof t},i=o.sort,u=o.push,s=function(t){var e,n,o,a,i,s,d,c=0,f=this.length-1,h=this.CompareFn,l=0;if(0!==arguments.length&&0!==this.length){if(arguments.length>1?(t=[],u.apply(t,arguments)):r(t)||(t=[t]),d=t.length,!h){for(n=0;d>n;n++)for(o=t[n],a=this.length,c=0;a>c;c++)this[c]===o&&(this.splice(c,1),l++,c=a);return l===d}for(t.sort(h),s=h(this[this.length-1],t[d-1]),n=d-1;n>=0;n--){o=t[n],c=0,i=h(this[0],o);do c===f?a=i:c+1===f?0>=s?(c=f,a=i=s):(f=c,a=s=i):(e=Math.floor((c+f)/2),a=h(this[e],o),0>=a?(c=e,i=a):(f=e,s=a));while(f>c);if(0===a)for(e=c;e>=0&&0===a;)this[e]===o?(a=-1,this.splice(e,1),l++):e>c&&(e--,a=h(this[e],o))}return l===d}},d=function(t){var e,n,o,a,i,s,d,c=0,f=this.length-1,h=this.CompareFn;if(0!==arguments.length){if(arguments.length>1?(t=[],u.apply(t,arguments)):r(t)||(t=[t]),h&&t.sort(h),-1===f||!h)return void u.apply(this,t);for(d=t.length,i=h(this[0],t[0]),n=0;d>n;n++){o=t[n],f=this.length-1,s=h(this[this.length-1],o);do c===f?a=i:c+1===f?0>s?(c=f,a=i=s):(f=c,a=i):(e=Math.floor((c+f)/2),a=h(this[e],o),0>a?(c=e,i=a):(f=e,s=a));while(f>c);this.splice(0>=a?c+1:c,0,o)}}},c=function(t,e){var n=[];return r(t)?u.apply(n,t):(e=t,t=void 0),a(e)&&(n.CompareFn=e),n.remove=s,n.add=d,n.sort=function(){arguments.length>0?i.apply(n,arguments):n.CompareFn&&i.call(n,n.CompareFn)},n.length>0&&n.sort(),n},f=function(t,e){var n,o;if(r(t))for(o=t.length,n=0;o>n;n++)e.apply(t,[t[n],n]);else for(n in t)t.hasOwnProperty(n)&&e.apply(t,[t[n],n])},h=function(t,e){var n,o,a,i=0,u=[];if(r(t))for(o=t.length,n=0;o>n;n++)a=e.apply(t,[t[n],n,i]),void 0!==a&&(u.push(a),i++);else for(n in t)t.hasOwnProperty(n)&&(a=e.apply(t,[t[n],n,i]),void 0!==a&&(u.push(a),i++));return u},l=function(t){var e,n,o;if(r(t))for(e=[],o=t.length,n=0;o>n;n++)e.push(t[n]);else{e={};for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}return e},p=function(t,e){var n=function(t){var e=t;return 0>e&&(e=-1/e,e=Math.floor(100*e)/100),e},o=function(t){var e=t;return 0==e?0:(e=n(e)+1,e=parseInt(100*e+.5,10)/100)},r=function(t){return t>0?(t=t>.79?Math.floor(1/t*100)/100:Math.ceil(1/t*100)/100,(-t).toFixed(2)):(t=-.79>t?Math.round(Math.floor(100*Math.abs(1/t)))/100:Math.round((Math.ceil(100*Math.abs(1/t))+.01)/100*100)/100,t.toFixed(2))},a=function(t){return Math.round(100*r(t))},i=t;switch(e){case"1":i=o(i);break;case"2":i=n(i);break;case"3":i=r(i);break;case"5":i=a(i)}return i},v=function(e){var n=new Date(e);return n.setHours(e.getHours()+t.TimeZone),n},g=function(t){var e=new Date(t);return e.setHours(-4),e},y=function(t){var e=g(t);return new Date(e.getFullYear(),e.getMonth(),e.getDate())},m=function(e){return t.Month[e.getMonth()]+" "+e.getDate()+(e.getFullYear()!=(new Date).getFullYear()?", "+e.getFullYear():"")};return c.prototype=o,e={isArray:r,isFunction:a,List:c,clone:l,each:f,map:h,ConvertOdds:p,ConvertSiteTime:v,toShortDate:m,UTC2ServerTime:g,UTC2ServerDate:y}}),function(t,e){"function"==typeof define&&define.amd?define(["jquery","MessageController","Util"],e):t.OddsManager=e(t.jQuery,t.MessageController,t.Onebook.Util)}(this,function(t,e,n){"use strict";var o={lang:"en",SportType:"1",FixtureType:"d"},r=e.getClient("oddsManager"),a=n.each,i=n.List,u=n.UTC2ServerDate,s=n.isArray,d=n.isFunction,c=0,f=function(){return c+=1},h=null,l=new i,p={},v={},g={},y=[],m=[],M=function(t,e){return t.LeagueId!==e.LeagueId?t.LeagueId-e.LeagueId:t.MatchCode!==e.MatchCode?t.MatchCode>e.MatchCode?1:-1:t.MatchId-e.MatchId},b=function(t,e){return t.ResourceId!==e.ResourceId?t.ResourceId-e.ResourceId:t.MaxBet!==e.MaxBet?e.MaxBet-t.MaxBet:t.OddsId-e.OddsId},I=function(){var t={},e={};y=[],m=[],a(p,function(n,o){a(n.matches,function(n,o){var r=u(n.ShowTimeUTC),i=r.getMonth()+"-"+r.getDate();t.hasOwnProperty(i)||(t[i]=r,y.push(t[i])),a(n.oddset,function(t){var n=t.Bettype;e.hasOwnProperty("b"+n)||(e["b"+n]=n,m.push(n))})})}),y.sort(function(t,e){return t-e}),m.sort()},O=function(e,n){var o=p[e.LeagueId];o||(o=p[e.LeagueId]={matches:new i(M)},l.add(o)),t.extend(o,e),o.tstamp=n},w=function(t,e){var n=p[t];n&&(delete p[t],l.remove(n),n.tstamp=e,a(n.matches,function(t){T(t.MatchId,e)}))},C=function(e,o){var r,a=v[e.MatchId],u=!1;if(e.ShowTime&&(e.ShowTimeUTC=e.ShowTime,e.ShowTime=n.ConvertSiteTime(e.ShowTimeUTC)),void 0!==e.MatchCode&&(e.MatchCode=e.MatchCode.toUpperCase()),a){if(r=p[a.LeagueId],!r)return;u=a.MatchCode!==e.MatchCode&&void 0!==e.MatchCode,t.extend(a,e),u&&r.matches.sort()}else{if(r=p[e.LeagueId],!r)return;a=v[e.MatchId]=t.extend({oddset:new i(b)},e),r.matches.add(a)}r.tstamp=a.tstamp=o},T=function(t,e){var n,o=v[t];o&&(delete v[t],o.tstamp=e,a(o.oddset,function(t){x(t.OddsId,e)}),n=p[o.LeagueId],n&&(n.tstamp=e,n.matches.remove(o),0===n.matches.length&&w(n.LeagueId,e)))},L=function(e,n){var o,r,a=g[e.OddsId],i=!1;if(a){if(o=v[a.MatchId],r=p[a.LeagueId],!o||!r){var u="Update Market fail";return o||(u=u+", Match['"+a.MatchId+"'] not found"),void(r||(u=u+", League['"+a.LeagueId+"'] not found"))}void 0!==e.MaxBet&&a.MaxBet!==e.MaxBet&&(i=!0),t.extend(a,e),i&&o.oddset.sort()}else{if(o=v[e.MatchId],!o)return;a=g[e.OddsId]={},t.extend(a,e),o.oddset.add(a),r=p[o.LeagueId]}r.tstamp=o.tstamp=a.tstamp=n},x=function(t,e){var n,o,r=g[t];r&&(r.tstamp=e,delete g[t],n=v[r.MatchId],o=p[r.LeagueId],n&&(n.tstamp=e,n.oddset.remove(r),0===n.oddset.length&&T(n.MatchId,e)),o&&(o.tstamp=e))},S={UL:O,DL:w,UM:C,DM:T,UK:L,DK:x},U=[],_=function(t){a(t.leagues,function(t){var e=t.matches;delete t.matches,U.push({act:"UL",data:t}),a(e,function(e){var n=e.oddset;e.LeagueId=t.LeagueId,e.SportType=t.SportType,delete e.oddset,U.push({act:"UM",data:e}),a(n,function(n){var o=n.sels;n.sels={},a(o,function(t){n.sels[t.Key]=t}),n.MatchId=e.MatchId,n.MatchCode=e.MatchCode,n.LeagueId=t.LeagueId,U.push({act:"UK",data:n})})})}),a(t.UpdateMatches,function(t){U.push({act:"UM",data:t})}),a(t.UpdateOddset,function(t){var e=t.sels;t.sels={},a(e,function(e){t.sels[e.Key]=e}),U.push({act:"UK",data:t})}),a(t.DelMatches,function(t){U.push({act:"DM",data:t})}),a(t.DelOddset,function(t){U.push({act:"DK",data:t})})},k=function(t){var e,n=U?U.length||0:0,o=f();0!==n&&(t||(t=n),t>n&&(t=n),e=U.splice(0,t),a(e,function(t){S[t.act](t.data,o)}))},D=function(t,e,n,o){var r,a,i,u=e.length,d={},c="string"==typeof t?h[t]:t;if(!c)return e;if(c&&!s(c)&&(c=c["s"+n]||c["b"+o]||c["default"]),0===e.length)return[];if(s(e[0])&&!h.hasOwnProperty(c[0])&&e[0].length===c.length){for(d=[],r=0;u>r;r++)d.push(D(c,e[r],n,o));return d}for(r=0;u>r;r++)a=c[r],i=e[r],"SportType"===a&&(n=i),"Bettype"===a&&(o=i),d[a||"*p"+r]=s(i)?D(a,i,n,o):i;return d},F=null,A=function(t){l=new i,p={},v={},g={},o=t,o.tstamp=0},B=function(e,n){if(F){var a=F;F=null,a.abort()}e&&(d(e)?(n=e,e=null):A(e)),F=t.ajax({url:"/EuroSite/match_data.ashx",data:o,dataType:"jsonp",jsonp:"jsoncallback",success:function(t){var e=D("Fixture",t,o.SportType||1);F=null,_(e),k(),I(),e.tstamp&&(o.tstamp=e.tstamp),r.send("odds.update",{FullOdds:l,DateList:y,BetTypeList:m})},error:function(t,e,n){("abort"!==e||t===F)&&(F=null,r.send("odds.update",null))}})},P=function(t){var e,n,o,r,a;h=t;for(e in h)if("string"!=typeof h[e][0]&&(o=h[e],h[e]={},n=o[0].hasOwnProperty("s")?"s":o[0].hasOwnProperty("b")?"b":!1,n&&s(o[0][n])))for(r=0;r<o.length;r++)for(a=0;a<o[r][n].length;a++)0===o[r][n][a]?h[e]["default"]=o[r][e]:h[e][n+o[r][n][a]]=o[r][e],1!==o[r][n][a]||h[e]["default"]||(h[e]["default"]=o[r][e])},j=function(){t.ajax({url:"/EuroSite/Match_data_Schema.ashx",data:{},dataType:"jsonp",jsonp:"jsoncallback",success:function(t){P(t)},error:function(t,e,n,o){}})};return r.receive("TimeZone.change",function(){I(),r.send("odds.update",{FullOdds:l,DateList:y,BetTypeList:m})}),j(),{query:B}});